<!doctype html>
<html lang="en" data-bs-theme="auto">
<div th:replace="shared/head :: head"></div>
<body>

<div th:replace="shared/nav :: nav"></div>

<main class="container">
    <div class="bg-body-tertiary p-5 rounded">
        <h1>Update Service Status</h1>


        <div class="mb-3">
            <label for="serviceInput" class="form-label">Service ID</label>
            <input type="text" class="form-control" id="serviceInput" placeholder="Enter a Service">
        </div>

        <select class="form-select form-select-sm mb-3" aria-label=".form-select-lg example" id="statusOption">
            <option selected>Select a Status</option>
            <option value="1">IN_PROGRESS</option>
            <option value="2">Waiting for parts arrival</option>
        </select>

        <button type="button" class="btn btn-primary mt-3" onclick="create()" th:href="@{/}">Update Service</button>
    </div>
</main>

<div th:replace="shared/scripts :: scripts"></div>

<script>
    function create() {
        const url = window.location.host.includes('localhost') ? `http://${window.location.host}/services/update?status=IN_PROGRESS` : `https://${window.location.host}/services/update?status=IN_PROGRESS`;
        const urlToRedirect = window.location.host.includes('localhost') ? `http://${window.location.host}/services` : `https://${window.location.host}/services`;
        const status = document.querySelector('select').value;
        const data = {
            id: document.getElementById("serviceInput").value,
            description: "test",
            amount: {
                "costsAmount": "1",
                "laborAmount": "2"
            },
            estimation: {
                "unit": "HOURS",
                "value": 0
            }
        };

        axios({
            method: 'put',
            url: url,
            data: data
        })
            .then(data => window.location.replace(urlToRedirect))
            .catch(error => console.log(error));
    }
</script>

</body>
</html>